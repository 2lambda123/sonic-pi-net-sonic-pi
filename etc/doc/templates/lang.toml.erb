<%=
t_(<<~TEXT
# This is a data file that contains information describing the text that is
# displayed on pages in the Lang section of Sonic Pi's help panel.
TEXT
)
%>
<%
  summary = item[:summary]
  summary[0] = summary[0].capitalize
%>
[<%= item[:name] %>]

<%=
t_(<<~TEXT
# A short phrase describing this Sonic Pi function. (Eg the 'chord' function has
# a summary phrase: 'Create chord').
TEXT
)
%>
summary = "<%= t_(summary) %>"

<%=
t_(<<~TEXT
# Args are the required parameters for the function. Each arg has two documented
# properties:
# - the arg's name
# - the arg's type (number, integer, symbol, ...).
TEXT
)
%>
<% item[:args].each do |name, type| %>
[[<%= item[:name] %>.args]]
name = "<%= name %>"
type = "<%= t_(type) %>"
<% end %>
<%= t_('# The detailed description of this function.') %>
doc = '''
<%= t_(item[:doc]) %>
'''

<%=
t_(<<~TEXT
# The label describing the version of Sonic Pi in which this function first
# appeared.
TEXT
)
%>
[<%= item[:name] %>.introduced]
label = "<%= t_("Introduced in #{item[:introduced].to_s}") %>"
<% if item[:opts] && !item[:opts].empty? %>

<%=
t_(<<~TEXT
# The options are the optional parameters of this function.
# Each option has two documented properties:
# - the option's name
# - the option's description doc.
TEXT
)
%>
[<%= item[:name] %>.options]
label = "<%= t_('Options') %>"
<% item[:opts].each do |name, doc| %>
[[<%= item[:name] %>.options.list]]
name = "<%= name.to_s %>"
doc = "<%= t_(doc) %>"
<% end %>
<% end %>
<%=
t_(<<~TEXT
# Each function may have one or more examples. If it has any, they are listed
# under an overall 'Example' or 'Examples' label (heading), and each example has
# a numbered sub-heading, such as 'Example 1'.
TEXT
)
%>
[<%= item[:name] %>.examples]
label = "<%= t_('Example') %>"
label_plural = "<%= t_('Examples') %>"
<% item[:examples].each_with_index do |e, index| %>
[[<%= item[:name] %>.examples.list]]
label = "<%= t_("Example #{index + 1}") %>"
<% end %>
