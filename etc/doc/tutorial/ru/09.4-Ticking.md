9.4 Ticking

# Тики

Однажды, кодируя вживую, ты, вероятно, найдёшь себя делающим множество вещей с
помощью циклов, основанных на кольцах. Ты будешь помещать в кольца мелодии,
ритмы, последовательности аккордов, тембральные изменения и т.д и т.п.

## Тики и кольца

Sonic Pi предоставляет *очень* удобный инструмент для работы с кольцами внутри
`live_loop`. Он называется системой тиков. В разделе о кольцах мы говорили о
счётчике, который постоянно увеличиватся, подобно номеру текущего такта. Тик
как раз и реализует эту идею. Давай рассмотрим примеры:

```
counter = 0
live_loop :arp do
  play (scale :e3, :minor_pentatonic)[counter], release: 0.1
  counter += 1
  sleep 0.125
end
```

Это эквивалентно:

```
live_loop :arp do
  play (scale :e3, :minor_pentatonic).tick, release: 0.1
  sleep 0.125
end
```

Здесь мы просто берём минорную пентатонику, построенную от e3, и тикаем через
каждый элемент. Это делается путем добавления `.tick` в конец объявления гаммы.
Тик является локальным для живого цикла, поэтому каждый живой цикл может иметь
свой собственный, независимый тик:

```
live_loop :arp do
  play (scale :e3, :minor_pentatonic).tick, release: 0.1
  sleep 0.125
end

live_loop :arp2 do
  use_synth :dsaw
  play (scale :e2, :minor_pentatonic, num_octaves: 3).tick, release: 0.25
  sleep 0.25
end
```

## Функция tick

Ты также можешь вызвать `tick` как стандартную функцию и использовать
возвращаемое ею значение в качестве индекса:

```
live_loop :arp do
  idx = tick
  play (scale :e3, :minor_pentatonic)[idx], release: 0.1
  sleep 0.125
end
```

Однако, гораздо изящнее вызывать `.tick` в конце объявления кольцевого списка.
Функция `tick` полезна когда ты хочешь сделать что-то необычное с величиной
тика или, если нужно, использовать тики для чего-то отличного от индексирования
в кольцах.

## Функция Look

Магическая особенность тика заключается в том, что он  не только возвращает
новый индекс (или элемент кольцевого списка по этому индексу), он также
гарантирует, что в следующий раз, когда ты вызовешь тик, ты получишь следующее
значение. Посмотри примеры для функции `tick`  в разделе "Язык" документации,
чтобы узнать о различных способах работы с ней. Впрочем, сейчас необходимо
отметить, что иногда тебе захочется просто посмотреть на текущее значение тика
и *не увеличивать* его. Это доступно с помощью Функции `look`. Ты можешь
вызвать `look` как стандартную функцию путем добавления `.look` в конец
кольцевого списка.

## Именование тиков

Наконец, иногда тебе может потребоваться использовать более одного тика внутри
живой петли. Это достигается путем предоставления твоему тику имени:

```
live_loop :arp do
  play (scale :e3, :minor_pentatonic).tick(:foo), release: 0.1
  sleep (ring 0.125, 0.25).tick(:bar)
end
```

Здесь мы используем два тика - один для игры нот, другой для времени сна.
Так как они оба находятся в одной и той же живой петле, чтобы держать их
раздельно, нам нужно дать им уникальные имена. Это тот же самое, что и
именование `live_loop` - мы просто передаем функции аргумент с префиксом `:`.
В примере выше мы назвали один тик `:foo` а другой `:bar`. Если мы хотим
применить функцию `look` к одному из тиков, нам нужно передать имя тика
функции `look`.

## Не делай это слишком сложным

Большая часть мощности системы тиков не будет полезной, пока ты ещё только
начинаешь осваивать Sonic Pi. Не пытайся выучить всё в этом разделе. Просто
сосредоточься на одном тике для одного кольца. Это даст тебе больше радости и
простоты применения тиков для колец в твоих `live_loop`.

Взгляни на документацию для функции `tick`, там много полезных примеров.
Счастливых тиков!
